(function(h,D,e,a,R,s,I,B,N,w,T,y){"use strict";const{ScrollView:v,View:c,Text:d,TextInput:A,Image:C,ActivityIndicator:$}=e.ReactNative,{FormSection:M}=B.Forms;(!Array.isArray(s.storage.words)||s.storage.words.length!==10)&&(s.storage.words=["","","","","","","","","",""]);const x=function(){return s.storage.words.filter(function(t){return typeof t=="string"&&t.trim().length}).length},_=["/raid","/fetchprofile","/userid"],r=e.stylesheet.createThemedStyleSheet({base:{flex:1,justifyContent:"center",alignItems:"center",padding:12,backgroundColor:a.semanticColors.BACKGROUND_PRIMARY},card:{width:"100%",padding:16,borderRadius:16,backgroundColor:a.semanticColors.CARD_BACKGROUND_DEFAULT,borderWidth:1,borderColor:a.semanticColors.BORDER_MUTED,gap:10},headerRow:{flexDirection:"row",alignItems:"center",gap:8},headerIcon:{width:24,height:24,tintColor:a.semanticColors.TEXT_DEFAULT},headerText:{fontSize:20,fontWeight:"700",color:a.semanticColors.TEXT_DEFAULT},statusRow:{flexDirection:"row",alignItems:"center",gap:6},statusIcon:{width:16,height:16},statusText:{fontSize:14},buttonRow:{flexDirection:"row",gap:8,marginTop:6},button:{flex:1,paddingVertical:12,borderRadius:12,alignItems:"center",justifyContent:"center"},primaryBtn:{backgroundColor:a.semanticColors.BUTTON_PRIMARY_BACKGROUND},secondaryBtn:{backgroundColor:a.semanticColors.BUTTON_SECONDARY_BACKGROUND},primaryText:{color:a.semanticColors.BUTTON_PRIMARY_TEXT,fontWeight:"600"},secondaryText:{color:a.semanticColors.BUTTON_SECONDARY_TEXT,fontWeight:"600"},input:{backgroundColor:a.semanticColors.BACKGROUND_SECONDARY,color:a.semanticColors.TEXT_DEFAULT,borderRadius:8,paddingHorizontal:12,paddingVertical:10,borderWidth:1,borderColor:a.semanticColors.BORDER_MUTED,marginBottom:10}});function O(){return I.useProxy(s.storage),e.React.createElement(v,{style:{padding:16}},e.React.createElement(M,{title:"Raid Messages"},s.storage.words.map(function(t,n){return e.React.createElement(c,{key:n,style:{marginBottom:10}},e.React.createElement(d,{style:{color:a.semanticColors.TEXT_DEFAULT,marginBottom:4}},"Message ",n+1),e.React.createElement(A,{style:r.input,value:s.storage.words[n],onChangeText:function(i){return s.storage.words[n]=i},placeholder:"Enter raid message",placeholderTextColor:a.semanticColors.TEXT_MUTED}))})),e.React.createElement(c,{style:{height:40}}))}function S(){return I.useProxy(s.storage),e.React.createElement(c,{style:r.base},e.React.createElement(w.Reanimated.View,{entering:w.Reanimated.FadeInUp.duration(200),style:r.card},e.React.createElement(c,{style:r.headerRow},e.React.createElement(C,{source:R.getAssetIDByName("RobotIcon"),style:r.headerIcon}),e.React.createElement(d,{style:r.headerText},"Bemmo")),e.React.createElement(c,{style:r.statusRow},e.React.createElement(C,{source:R.getAssetIDByName("CircleCheckIcon-primary"),style:r.statusIcon}),e.React.createElement(d,{style:r.statusText},"Loaded raid custom strings: ",x())),e.React.createElement(c,{style:r.statusRow},e.React.createElement(C,{source:R.getAssetIDByName("CircleCheckIcon-primary"),style:r.statusIcon}),e.React.createElement(d,{style:r.statusText},"Loaded commands: ",_.join(", "))),e.React.createElement(c,{style:r.buttonRow},e.React.createElement(c,{style:[r.button,r.primaryBtn]},e.React.createElement(d,{style:r.primaryText},"Reload")),e.React.createElement(c,{style:[r.button,r.secondaryBtn],onTouchEnd:function(){return N.openModal("bemmo-config",function(){return e.React.createElement(O,null)})}},e.React.createElement(d,{style:r.secondaryText},"Configuration")))))}const E=y.findByProps("sendMessage","editMessage"),f=y.findByStoreName("UserStore"),p=[],{receiveMessage:U}=y.findByProps("receiveMessage"),{createBotMessage:b}=y.findByProps("createBotMessage"),P=function(){return Math.floor(Math.random()*100)};function F(t){return new Promise(function(n){return setTimeout(n,t)})}function L(){return Array.isArray(s.storage.words)?s.storage.words.filter(function(t){return typeof t=="string"&&t.trim().length}):[]}function k(){const t=L();return t.length?t[Math.floor(Math.random()*t.length)]:"### (no spam messages configured)"}p.push(T.registerCommand({name:"raid",displayName:"raid",description:"Start a Raid!",options:[{name:"amount",displayName:"amount",description:"Number of times to send",required:!0,type:4},{name:"delay",displayName:"delay",description:"Delay between messages (ms)",required:!0,type:4}],applicationId:"-1",inputType:1,type:1,execute:async function(t,n){const i=Number(t.find(function(o){return o.name==="amount"})?.value??0),l=Number(t.find(function(o){return o.name==="delay"})?.value??0);if(!(i<=0))for(let o=0;o<i;o++){const u=k(),g=P(),m=`${u} \`${g}\``;await F(l),E.sendMessage(n.channel.id,{content:m},void 0,{nonce:Date.now().toString()})}}})),p.push(T.registerCommand({name:"fetchprofile",displayName:"Fetch Profile",description:"Fetch a user's avatar as Bemmo",options:[{name:"user",displayName:"user",description:"Mention or ID of the user",required:!0,type:3}],applicationId:"-1",inputType:1,type:1,execute:async function(t,n){const i=t.find(function(m){return m.name==="user"})?.value?.trim();if(!i)return;const l=i.replace(/[<@!>]/g,""),o=f.getUser(l);if(!o){E.sendMessage(n.channel.id,{content:"\u274C User not found"},void 0,{nonce:Date.now().toString()});return}const u=o.getAvatarURL?.({format:"png",size:512})||`https://cdn.discordapp.com/embed/avatars/${Number(o.discriminator)%5}.png`,g=f.getCurrentUser();U(n.channel.id,Object.assign(b({channelId:n.channel.id,content:u}),{author:g}))}})),p.push(T.registerCommand({name:"userid",displayName:"User ID",description:"Displays a user's ID as Bemmo",options:[{name:"user",displayName:"user",description:"Mention or ID of the user",required:!0,type:3}],applicationId:"-1",inputType:1,type:1,execute:function(t,n){const i=t.find(function(m){return m.name==="user"})?.value?.trim();if(!i)return;const l=i.replace(/[<@!>]/g,""),o=f.getUser(l);if(!o){E.sendMessage(n.channel.id,{content:"\u274C User not found"},void 0,{nonce:Date.now().toString()});return}const u=`${o.username}'s ID: ${o.id}`,g=f.getCurrentUser();U(n.channel.id,Object.assign(b({channelId:n.channel.id,content:u}),{author:g}))}}));var X={onLoad:function(){D.logger.log("Raid + FetchProfile + UserID plugin loaded!")},onUnload:function(){for(const t of p)t();D.logger.log("Raid + FetchProfile + UserID plugin unloaded.")},settings:S};return h.default=X,Object.defineProperty(h,"__esModule",{value:!0}),h})({},vendetta,vendetta.metro.common,vendetta.ui,vendetta.ui.assets,vendetta.plugin,vendetta.storage,vendetta.ui.components,vendetta.ui.modals,vendetta.ui.reanimated,vendetta.commands,vendetta.metro);
