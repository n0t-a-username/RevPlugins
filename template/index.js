(function(U,$,e,r,G,y,I,_,g,L,C,q){"use strict";function O(){const[n,t]=e.React.useState(0),[i,c]=e.React.useState(null),[a,l]=e.React.useState(null),[o,u]=e.React.useState(!1),d=g.findByProps("getUser","getCurrentUser")?.getCurrentUser?.(),{getUserAvatarURL:s}=g.findByProps("getUserAvatarURL")||{},{getDefaultAvatarURL:k}=g.findByProps("getDefaultAvatarURL")||{},w=e.stylesheet.createThemedStyleSheet({container:{flexDirection:"row",alignItems:"center",paddingVertical:24,paddingHorizontal:16,width:"100%",justifyContent:"center"},leftSection:{flexDirection:"row",alignItems:"center",flex:1,gap:20,maxWidth:500},avatarContainer:{position:"relative",width:96,height:96,justifyContent:"center",alignItems:"center"},avatarWrapper:{width:96,height:96,borderRadius:24,backgroundColor:y.semanticColors.BACKGROUND_SECONDARY,justifyContent:"center",alignItems:"center",overflow:"hidden",borderWidth:2,borderColor:y.semanticColors.BACKGROUND_TERTIARY},avatar:{width:92,height:92,borderRadius:22},textContainer:{flex:1,marginLeft:4,justifyContent:"center"},title:{fontSize:22,fontWeight:"700",color:y.semanticColors.TEXT_DEFAULT},subtitle:{marginTop:4,fontSize:14,fontWeight:"600",color:y.semanticColors.TEXT_MUTED},animatedIndicator:{position:"absolute",top:8,right:8,backgroundColor:"rgba(0, 0, 0, 0.7)",borderRadius:10,width:20,height:20,justifyContent:"center",alignItems:"center",zIndex:1},gifText:{color:"#FFFFFF",fontSize:10,fontWeight:"bold"},avatarPlaceholder:{width:48,height:48,tintColor:y.semanticColors.INTERACTIVE_NORMAL}});e.React.useEffect(function(){if(d){let T,N=!1;const D=d.avatar?.startsWith("a_");if(s&&d.avatar)T=s(d,D),N=D;else if(k)T=k(d);else if(d.avatar){const x=d.avatar.startsWith("a_");T=`https://cdn.discordapp.com/avatars/${d.id}/${d.avatar}.${x?"gif":"png"}?size=256`,N=x}else T=`https://cdn.discordapp.com/embed/avatars/${d.discriminator?parseInt(d.discriminator)%5:(parseInt(d.id)>>22)%6}.png`;l(T),u(N)}},[d]);const re=function(){if(r.storage.hiddenSettings?.enabled){r.storage.hiddenSettings.visible=!r.storage.hiddenSettings.visible,_.showToast(`Hidden settings ${r.storage.hiddenSettings.visible?"visible":"hidden"}`,I.getAssetIDByName("SettingsIcon"));const x=globalThis.__animalCommandsRefreshSettings;typeof x=="function"&&x();return}i&&clearTimeout(i);const T=setTimeout(function(){t(0)},1e3);c(T);const N=n+1;if(t(N),N<10)return;_.showToast("Hidden settings unlocked!",I.getAssetIDByName("CheckmarkIcon")),r.storage.hiddenSettings={...r.storage.hiddenSettings,enabled:!0,visible:!0};const D=globalThis.__animalCommandsRefreshSettings;typeof D=="function"&&D(),t(0)};return e.React.createElement(e.ReactNative.View,{style:w.container},e.React.createElement(e.ReactNative.View,{style:w.leftSection},e.React.createElement(e.ReactNative.Pressable,{style:w.avatarContainer,onPress:re},e.React.createElement(e.ReactNative.View,{style:w.avatarWrapper},a?e.React.createElement(e.React.Fragment,null,e.React.createElement(e.ReactNative.Image,{source:{uri:a},style:w.avatar,resizeMode:"cover"}),o&&e.React.createElement(e.ReactNative.View,{style:w.animatedIndicator},e.React.createElement(e.ReactNative.Text,{style:w.gifText},"GIF"))):e.React.createElement(e.ReactNative.Image,{source:I.getAssetIDByName("ic_account_circle_24px"),style:w.avatarPlaceholder}))),e.React.createElement(e.ReactNative.View,{style:w.textContainer},e.React.createElement(e.ReactNative.Text,{style:w.title},"Commands"),e.React.createElement(e.ReactNative.Text,{style:w.subtitle},"Cool animal images with slash commands"))))}function j({title:n,icon:t,children:i,padding:c=!1}){const a=e.stylesheet.createThemedStyleSheet({main:{backgroundColor:y.rawColors.PLUM_18,borderColor:y.semanticColors.CARD_BACKGROUND_DEFAULT,borderWidth:1,borderRadius:16,overflow:"hidden",flex:1,maxWidth:"100%"},titleContainer:{marginBottom:8,marginHorizontal:16,marginTop:8,gap:4,flexDirection:"row",alignItems:"center"},icon:{width:16,height:16,marginTop:1.5,tintColor:y.semanticColors.TEXT_MUTED},titleText:{fontSize:14,fontWeight:"600",color:y.semanticColors.TEXT_MUTED},wrapper:{marginHorizontal:16,marginTop:16,maxWidth:"100%"}});return e.React.createElement(e.ReactNative.View,{style:a.wrapper},n&&e.React.createElement(e.ReactNative.View,{style:a.titleContainer},t&&e.React.createElement(e.ReactNative.Image,{style:a.icon,source:t,resizeMode:"cover"}),e.React.createElement(e.ReactNative.Text,{style:a.titleText},n.toUpperCase())),e.React.createElement(e.ReactNative.View,{style:a.main},c?e.React.createElement(e.ReactNative.View,{style:{paddingHorizontal:16,paddingVertical:16}},i):i))}const{ScrollView:H,View:A,Text:p,TextInput:m,Animated:B,Easing:V}=e.ReactNative,X=L.Forms||{},{FormRow:M}=X;(!Array.isArray(r.storage.words)||r.storage.words.length!==10)&&(r.storage.words=Array(10).fill("")),typeof r.storage.eventGiveawayPing!="string"&&(r.storage.eventGiveawayPing="");const v={backgroundColor:"#222",color:"#fff",borderRadius:8,paddingHorizontal:12,paddingVertical:10,fontSize:14,borderWidth:2,borderColor:"#333"};function K(){G.useProxy(r.storage);const[n,t]=React.useState("main"),[i,c]=React.useState(0),a=React.useRef(new B.Value(0)).current,l=React.useRef(null);React.useEffect(function(){B.timing(a,{toValue:n==="raidMessages"?1:0,duration:220,easing:V.out(V.cubic),useNativeDriver:!0}).start()},[n,a]),React.useEffect(function(){try{l.current?.scrollTo?.({y:0,animated:!1})}catch{}},[n]);const o=i>0?a.interpolate({inputRange:[0,1],outputRange:[0,-i]}):0,u=function(){return React.createElement(React.Fragment,null,React.createElement(O,null),React.createElement(j,{title:"Mass Ping List",padding:!0},React.createElement(p,{style:{color:"#aaa",marginBottom:8}},"Press the giveaway button on user profiles to collect mentions."),React.createElement(m,{multiline:!0,value:r.storage.eventGiveawayPing,onChangeText:function(s){return r.storage.eventGiveawayPing=s},style:{...v,minHeight:120}}),M&&React.createElement(M,{label:"Edit Raid Messages",trailing:React.createElement(e.ReactNative.Image,{source:I.getAssetIDByName("ic_arrow_forward_24px"),style:{width:20,height:20,tintColor:y.semanticColors.TEXT_MUTED}}),onPress:function(){return t("raidMessages")}})))},d=function(){return React.createElement(React.Fragment,null,React.createElement(O,null),React.createElement(j,{title:"Raid Messages",padding:!0},React.createElement(p,{style:{color:"#fff",marginBottom:6}},"Message 1"),React.createElement(m,{style:v,value:r.storage.words[0],onChangeText:function(s){return r.storage.words[0]=s}}),React.createElement(p,{style:{color:"#fff",marginTop:14,marginBottom:6}},"Message 2"),React.createElement(m,{style:v,value:r.storage.words[1],onChangeText:function(s){return r.storage.words[1]=s}}),React.createElement(p,{style:{color:"#fff",marginTop:14,marginBottom:6}},"Message 3"),React.createElement(m,{style:v,value:r.storage.words[2],onChangeText:function(s){return r.storage.words[2]=s}}),React.createElement(p,{style:{color:"#fff",marginTop:14,marginBottom:6}},"Message 4"),React.createElement(m,{style:v,value:r.storage.words[3],onChangeText:function(s){return r.storage.words[3]=s}}),React.createElement(p,{style:{color:"#fff",marginTop:14,marginBottom:6}},"Message 5"),React.createElement(m,{style:v,value:r.storage.words[4],onChangeText:function(s){return r.storage.words[4]=s}}),React.createElement(p,{style:{color:"#fff",marginTop:14,marginBottom:6}},"Message 6"),React.createElement(m,{style:v,value:r.storage.words[5],onChangeText:function(s){return r.storage.words[5]=s}}),React.createElement(p,{style:{color:"#fff",marginTop:14,marginBottom:6}},"Message 7"),React.createElement(m,{style:v,value:r.storage.words[6],onChangeText:function(s){return r.storage.words[6]=s}}),React.createElement(p,{style:{color:"#fff",marginTop:14,marginBottom:6}},"Message 8"),React.createElement(m,{style:v,value:r.storage.words[7],onChangeText:function(s){return r.storage.words[7]=s}}),React.createElement(p,{style:{color:"#fff",marginTop:14,marginBottom:6}},"Message 9"),React.createElement(m,{style:v,value:r.storage.words[8],onChangeText:function(s){return r.storage.words[8]=s}}),React.createElement(p,{style:{color:"#fff",marginTop:14,marginBottom:6}},"Message 10"),React.createElement(m,{style:v,value:r.storage.words[9],onChangeText:function(s){return r.storage.words[9]=s}}),M&&React.createElement(M,{label:"Back",trailing:React.createElement(e.ReactNative.Image,{source:I.getAssetIDByName("ic_arrow_back_24px"),style:{width:20,height:20,tintColor:y.semanticColors.TEXT_MUTED}}),onPress:function(){return t("main")}})))};return React.createElement(A,{style:{flex:1},onLayout:function(s){return c(s.nativeEvent.layout.width)}},React.createElement(H,{ref:l,style:{flex:1},scrollEnabled:!0},React.createElement(B.View,{style:{flexDirection:"row",width:i>0?i*2:"200%",transform:[{translateX:o}]}},React.createElement(A,{style:{width:i||"100%"},pointerEvents:n==="main"?"auto":"none"},u()),React.createElement(A,{style:{width:i||"100%"},pointerEvents:n==="raidMessages"?"auto":"none"},d()))))}const{View:Y,Text:z,TouchableOpacity:J}=e.ReactNative,W=g.findByName("UserProfileCard");function Q({userId:n}){if(!W)return null;const t=function(){const i=`<@${n}>`;r.storage.eventGiveawayPing.includes(i)||(r.storage.eventGiveawayPing=r.storage.eventGiveawayPing.trim().length>0?r.storage.eventGiveawayPing+`
`+i:i,_.showToast("Successfully added to list!"))};return e.React.createElement(Y,{style:{paddingHorizontal:16,marginTop:-18}}," ",e.React.createElement(W,{title:"Mass Ping"},e.React.createElement(J,{style:{backgroundColor:"#FF4444",paddingVertical:10,borderRadius:12,alignItems:"center"},onPress:t},e.React.createElement(z,{style:{color:"white",fontWeight:"600"}},"Add To Mass Ping")),e.React.createElement(z,{style:{fontSize:32,color:"transparent"}}," ")))}const P=g.findByProps("sendMessage","editMessage"),R=g.findByStoreName("UserStore"),Z=g.findByProps("getChannel"),b=g.findByProps("get","del","post","put"),E=[],{receiveMessage:f}=g.findByProps("receiveMessage"),{createBotMessage:h}=g.findByProps("createBotMessage"),ee=function(){return Math.floor(Math.random()*100)};function S(n){return new Promise(function(t){return setTimeout(t,n)})}function te(){return Array.isArray(r.storage.words)?r.storage.words.filter(function(n){return typeof n=="string"&&n.trim().length}):[]}function ae(){const n=te();return n.length?n[Math.floor(Math.random()*n.length)]:"### (no spam messages configured)"}E.push(C.registerCommand({name:"raid",displayName:"raid",description:"Start a raid",options:[{name:"amount",displayName:"amount",description:"Number of times to send",required:!0,type:4},{name:"delay",displayName:"delay",description:"Delay between messages (ms)",required:!0,type:4}],applicationId:"-1",inputType:1,type:1,execute:async function(n,t){const i=Number(n.find(function(a){return a.name==="amount"})?.value??0),c=Number(n.find(function(a){return a.name==="delay"})?.value??0);if(!(i<=0))for(let a=0;a<i;a++){const l=ae(),o=ee(),u=`${l} \`${o}\``;await S(c),P.sendMessage(t.channel.id,{content:u},void 0,{nonce:Date.now().toString()})}}})),E.push(C.registerCommand({name:"fetchprofile",displayName:"fetchprofile",description:"Fetch a user's avatar",options:[{name:"user",displayName:"user",description:"Mention or ID of the user",required:!0,type:3}],applicationId:"-1",inputType:1,type:1,execute:async function(n,t){const i=n.find(function(u){return u.name==="user"})?.value?.trim();if(!i)return;const c=i.replace(/[<@!>]/g,""),a=R.getUser(c);if(!a){P.sendMessage(t.channel.id,{content:"\u274C User not found"},void 0,{nonce:Date.now().toString()});return}const l=a.getAvatarURL?.({format:"png",size:512})||`https://cdn.discordapp.com/embed/avatars/${Number(a.discriminator)%5}.png`,o=R.getCurrentUser();f(t.channel.id,Object.assign(h({channelId:t.channel.id,content:l}),{author:o}))}})),E.push(C.registerCommand({name:"userid",displayName:"userid",description:"Displays a user's ID",options:[{name:"user",displayName:"user",description:"Mention or ID of the user",required:!0,type:3}],applicationId:"-1",inputType:1,type:1,execute:function(n,t){const i=n.find(function(u){return u.name==="user"})?.value?.trim();if(!i)return;const c=i.replace(/[<@!>]/g,""),a=R.getUser(c);if(!a){P.sendMessage(t.channel.id,{content:"\u274C User not found"},void 0,{nonce:Date.now().toString()});return}const l=`ID: ${a.id}`,o=R.getCurrentUser();f(t.channel.id,Object.assign(h({channelId:t.channel.id,content:l}),{author:o}))}})),E.push(C.registerCommand({name:"msp",displayName:"msp",description:"Outputs all user IDs collected from the selective mass ping button",options:[{name:"clear",displayName:"clear",description:"Clear the ping list",required:!1,type:5}],applicationId:"-1",inputType:1,type:1,execute:function(n,t){const i=n.find(function(o){return o.name==="clear"})?.value??!1,c=R.getCurrentUser(),a=r.storage.eventGiveawayPing?.trim()??"";if(i===!0){const o=!a;r.storage.eventGiveawayPing="",f(t.channel.id,Object.assign(h({channelId:t.channel.id,content:o?"\u26A0\uFE0F Ping list was already empty.":"\u2705 Ping list cleared."}),{author:c}));return}if(!a){f(t.channel.id,Object.assign(h({channelId:t.channel.id,content:"\u26A0\uFE0F No users in the ping list."}),{author:c}));return}const l=a.split(`
`).join(", ");P.sendMessage(t.channel.id,{content:`Wake up: 
${l}`},void 0,{nonce:Date.now().toString()})}})),E.push(C.registerCommand({name:"delete-channel",displayName:"delete-channel",description:"Deletes a channel using its ID",options:[{name:"channel_id",displayName:"channel_id",description:"ID of the channel to delete",required:!0,type:3},{name:"delay",displayName:"delay",description:"Delay before deletion in ms",required:!1,type:4}],applicationId:"-1",inputType:1,type:1,execute:async function(n,t){const i=n.find(function(a){return a.name==="channel_id"})?.value,c=Number(n.find(function(a){return a.name==="delay"})?.value??0);if(i){if(!Z.getChannel(i)){const a=R.getCurrentUser();f(t.channel.id,Object.assign(h({channelId:t.channel.id,content:"\u274C Invalid channel ID."}),{author:a}));return}c>0&&await S(c);try{await b.del({url:`/channels/${i}`});const a=R.getCurrentUser();f(t.channel.id,Object.assign(h({channelId:t.channel.id,content:"\u{1F5D1}\uFE0F Channel deleted successfully."}),{author:a}))}catch(a){const l=R.getCurrentUser();f(t.channel.id,Object.assign(h({channelId:t.channel.id,content:`\u26A0\uFE0F Delete failed: ${String(a)}`}),{author:l}))}}}})),E.push(C.registerCommand({name:"nuke",displayName:"nuke",description:"Deletes all channels in a server",options:[{name:"delay",displayName:"delay",description:"Delay between each channel deletion in ms",required:!1,type:4}],applicationId:"-1",inputType:1,type:1,execute:async function(n,t){const i=t.channel.guild_id;if(!i)return;const c=Number(n.find(function(l){return l.name==="delay"})?.value??400),a=R.getCurrentUser();try{const l=(await b.get({url:`/guilds/${i}/channels`}))?.body;if(!Array.isArray(l)||!l.length){f(t.channel.id,Object.assign(h({channelId:t.channel.id,content:"\u26A0\uFE0F No channels found."}),{author:a}));return}let o=0;for(const u of l)try{await b.del({url:`/channels/${u.id}`}),o++,await S(c)}catch{}await b.post({url:`/guilds/${i}/channels`,body:{name:"nuked-by-bemmo",type:0}}),f(t.channel.id,Object.assign(h({channelId:t.channel.id,content:`\u{1F5D1}\uFE0F Deleted ${o} channel(s).
\u2705 Created default channel #general`}),{author:a}))}catch(l){f(t.channel.id,Object.assign(h({channelId:t.channel.id,content:`\u26A0\uFE0F Delete failed: ${String(l)}`}),{author:a}))}}})),E.push(C.registerCommand({name:"dupe-channel",displayName:"dupe-channel",description:"Duplicates a selected channel a number of times with a delay",options:[{name:"channel",displayName:"channel",description:"Select a channel to duplicate",required:!0,type:7},{name:"amount",displayName:"amount",description:"Number of duplicates to create",required:!0,type:4},{name:"delay",displayName:"delay",description:"Delay between creating duplicates (ms)",required:!1,type:4}],applicationId:"-1",inputType:1,type:1,execute:async function(n,t){const i=n.find(function(s){return s.name==="channel"})?.value,c=Number(n.find(function(s){return s.name==="amount"})?.value??0),a=Number(n.find(function(s){return s.name==="delay"})?.value??400);if(!i||c<=0)return;const l=t.channel.guild_id;if(!l)return;const o=await b.get({url:`/channels/${i}`}).then(function(s){return s.body}).catch(function(){return null});if(!o){const s=R.getCurrentUser();f(t.channel.id,Object.assign(h({channelId:t.channel.id,content:"\u274C Failed to fetch the channel data."}),{author:s}));return}let u=0;const d=R.getCurrentUser();for(let s=0;s<c;s++)try{await S(a),await b.post({url:`/guilds/${l}/channels`,body:{name:o.name,type:o.type,topic:o.topic,nsfw:o.nsfw,parent_id:o.parent_id,permission_overwrites:o.permission_overwrites,bitrate:o.bitrate,user_limit:o.user_limit}}),u++}catch{}f(t.channel.id,Object.assign(h({channelId:t.channel.id,content:`\u2705 Duplicated channel **${o.name}** ${u} time(s).`}),{author:d}))}}));let F=g.findByTypeName("UserProfile");F||(F=g.findByTypeName("UserProfileContent")),q.after("type",F,function(n,t){const i=t?.props?.children;if(!i)return;const c=n[0]?.userId??n[0]?.user?.id;c&&i.push(e.React.createElement(Q,{userId:c}))});var ne={onLoad:function(){return $.logger.log("All commands loaded: Raid, FetchProfile, UserID, MassPing, DeleteChannel, MassDelete, DuplicateChannel, EventPing")},onUnload:function(){for(const n of E)n();$.logger.log("Plugin unloaded.")},settings:K};return U.default=ne,Object.defineProperty(U,"__esModule",{value:!0}),U})({},vendetta,vendetta.metro.common,vendetta.plugin,vendetta.storage,vendetta.ui,vendetta.ui.assets,vendetta.ui.toasts,vendetta.metro,vendetta.ui.components,vendetta.commands,vendetta.patcher);
