(function(E,B,e,d,r,T,C,h,y){"use strict";const{ScrollView:D,View:o,Text:s,TextInput:c,Button:p}=e.ReactNative,{FormSection:x}=T.Forms;(!Array.isArray(r.storage.words)||r.storage.words.length!==10)&&(r.storage.words=Array(10).fill(""));function b(){const[a,i]=e.React.useState(0),l=function(){return e.React.createElement(D,{style:{backgroundColor:d.semanticColors.BACKGROUND_MODAL,padding:16,maxHeight:"90%"}},e.React.createElement(x,{title:"Raid Messages"},e.React.createElement(o,{style:{marginBottom:14}},e.React.createElement(s,{style:{color:"#fff",marginBottom:6}},"Message 1"),e.React.createElement(c,{style:n,value:r.storage.words[0],onChangeText:function(t){return r.storage.words[0]=t}})),e.React.createElement(o,{style:{marginBottom:14}},e.React.createElement(s,{style:{color:"#fff",marginBottom:6}},"Message 2"),e.React.createElement(c,{style:n,value:r.storage.words[1],onChangeText:function(t){return r.storage.words[1]=t}})),e.React.createElement(o,{style:{marginBottom:14}},e.React.createElement(s,{style:{color:"#fff",marginBottom:6}},"Message 3"),e.React.createElement(c,{style:n,value:r.storage.words[2],onChangeText:function(t){return r.storage.words[2]=t}})),e.React.createElement(o,{style:{marginBottom:14}},e.React.createElement(s,{style:{color:"#fff",marginBottom:6}},"Message 4"),e.React.createElement(c,{style:n,value:r.storage.words[3],onChangeText:function(t){return r.storage.words[3]=t}})),e.React.createElement(o,{style:{marginBottom:14}},e.React.createElement(s,{style:{color:"#fff",marginBottom:6}},"Message 5"),e.React.createElement(c,{style:n,value:r.storage.words[4],onChangeText:function(t){return r.storage.words[4]=t}})),e.React.createElement(o,{style:{marginBottom:14}},e.React.createElement(s,{style:{color:"#fff",marginBottom:6}},"Message 6"),e.React.createElement(c,{style:n,value:r.storage.words[5],onChangeText:function(t){return r.storage.words[5]=t}})),e.React.createElement(o,{style:{marginBottom:14}},e.React.createElement(s,{style:{color:"#fff",marginBottom:6}},"Message 7"),e.React.createElement(c,{style:n,value:r.storage.words[6],onChangeText:function(t){return r.storage.words[6]=t}})),e.React.createElement(o,{style:{marginBottom:14}},e.React.createElement(s,{style:{color:"#fff",marginBottom:6}},"Message 8"),e.React.createElement(c,{style:n,value:r.storage.words[7],onChangeText:function(t){return r.storage.words[7]=t}})),e.React.createElement(o,{style:{marginBottom:14}},e.React.createElement(s,{style:{color:"#fff",marginBottom:6}},"Message 9"),e.React.createElement(c,{style:n,value:r.storage.words[8],onChangeText:function(t){return r.storage.words[8]=t}})),e.React.createElement(o,{style:{marginBottom:14}},e.React.createElement(s,{style:{color:"#fff",marginBottom:6}},"Message 10"),e.React.createElement(c,{style:n,value:r.storage.words[9],onChangeText:function(t){return r.storage.words[9]=t}}))),e.React.createElement(p,{text:"Close",onPress:function(){return C.closeModal()}}))},n={backgroundColor:"#222",color:"#fff",borderRadius:8,paddingHorizontal:12,paddingVertical:10,fontSize:14,borderWidth:2,borderColor:"#333"};return e.React.createElement(o,{style:{flex:1,justifyContent:"center",alignItems:"center",padding:16,backgroundColor:d.semanticColors.BACKGROUND_PRIMARY}},e.React.createElement(o,{style:{width:"100%",maxWidth:400,padding:16,borderRadius:16,backgroundColor:d.semanticColors.CARD_BACKGROUND_DEFAULT,borderColor:d.semanticColors.BORDER_MUTED,borderWidth:1,alignItems:"center"}},e.React.createElement(s,{style:{color:d.semanticColors.TEXT_DEFAULT,fontSize:20,fontWeight:"bold",marginBottom:8}},"Bemmo"),e.React.createElement(s,{style:{color:"#aaa"}},"- Loaded ",r.storage.words.filter(function(t){return t.trim()}).length," custom raid strings"),e.React.createElement(s,{style:{color:"#aaa"}},"- Loaded commands"),e.React.createElement(o,{style:{flexDirection:"row",marginTop:16,gap:12}},e.React.createElement(p,{text:"Reload",onPress:function(){return i(function(t){return t+1})}}),e.React.createElement(p,{text:"Configuration",onPress:function(){return C.openModal(function(){return e.React.createElement(l,null)})}}))),e.React.createElement(s,{style:{color:"#aaa",marginTop:16}},"Reload count: ",a))}const w=y.findByProps("sendMessage","editMessage"),m=y.findByStoreName("UserStore"),R=[],{receiveMessage:v}=y.findByProps("receiveMessage"),{createBotMessage:M}=y.findByProps("createBotMessage"),U=function(){return Math.floor(Math.random()*100)};function I(a){return new Promise(function(i){return setTimeout(i,a)})}function N(){return Array.isArray(r.storage.words)?r.storage.words.filter(function(a){return typeof a=="string"&&a.trim().length}):[]}function A(){const a=N();return a.length?a[Math.floor(Math.random()*a.length)]:"### (no spam messages configured)"}R.push(h.registerCommand({name:"raid",displayName:"raid",description:"Start a Raid!",options:[{name:"amount",displayName:"amount",description:"Number of times to send",required:!0,type:4},{name:"delay",displayName:"delay",description:"Delay between messages (ms)",required:!0,type:4}],applicationId:"-1",inputType:1,type:1,execute:async function(a,i){const l=Number(a.find(function(t){return t.name==="amount"})?.value??0),n=Number(a.find(function(t){return t.name==="delay"})?.value??0);if(!(l<=0))for(let t=0;t<l;t++){const u=A(),f=U(),g=`${u} \`${f}\``;await I(n),w.sendMessage(i.channel.id,{content:g},void 0,{nonce:Date.now().toString()})}}})),R.push(h.registerCommand({name:"fetchprofile",displayName:"Fetch Profile",description:"Fetch a user's avatar as Bemmo",options:[{name:"user",displayName:"user",description:"Mention or ID of the user",required:!0,type:3}],applicationId:"-1",inputType:1,type:1,execute:async function(a,i){const l=a.find(function(g){return g.name==="user"})?.value?.trim();if(!l)return;const n=l.replace(/[<@!>]/g,""),t=m.getUser(n);if(!t){w.sendMessage(i.channel.id,{content:"\u274C User not found"},void 0,{nonce:Date.now().toString()});return}const u=t.getAvatarURL?.({format:"png",size:512})||`https://cdn.discordapp.com/embed/avatars/${Number(t.discriminator)%5}.png`,f=m.getCurrentUser();v(i.channel.id,Object.assign(M({channelId:i.channel.id,content:u}),{author:f}))}})),R.push(h.registerCommand({name:"userid",displayName:"User ID",description:"Displays a user's ID as Bemmo",options:[{name:"user",displayName:"user",description:"Mention or ID of the user",required:!0,type:3}],applicationId:"-1",inputType:1,type:1,execute:function(a,i){const l=a.find(function(g){return g.name==="user"})?.value?.trim();if(!l)return;const n=l.replace(/[<@!>]/g,""),t=m.getUser(n);if(!t){w.sendMessage(i.channel.id,{content:"\u274C User not found"},void 0,{nonce:Date.now().toString()});return}const u=`${t.username}'s ID: ${t.id}`,f=m.getCurrentUser();v(i.channel.id,Object.assign(M({channelId:i.channel.id,content:u}),{author:f}))}}));var P={onLoad:function(){B.logger.log("Raid + FetchProfile + UserID plugin loaded!")},onUnload:function(){for(const a of R)a();B.logger.log("Raid + FetchProfile + UserID plugin unloaded.")},settings:b};return E.default=P,Object.defineProperty(E,"__esModule",{value:!0}),E})({},vendetta,vendetta.metro.common,vendetta.ui,vendetta.plugin,vendetta.ui.components,vendetta.ui.modals,vendetta.commands,vendetta.metro);
