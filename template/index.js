(function(u,d,a,s){"use strict";const l=d.Logger,c=s.findByStoreName("UserStore"),m=s.findByProps("sendMessage","receiveMessage"),y=s.findByProps("getToken"),f=y.getToken?.()||"";async function v(o){const t=await fetch(o).then(function(e){return e.blob()});return(await s.findByProps("uploadLocalFiles").uploadLocalFiles([t],f)).map(function(e){return{id:e.id,filename:e.name}})}function b({name:o,desc:t,api:e}){return a.registerCommand({name:o,displayName:o,description:t,options:[{name:"user",description:"Target user",type:6,required:!0}],applicationId:"-1",inputType:1,type:1,execute:async function(n,p){await p.defer();const r=c.getUser(n[0].value);if(!r)return{content:"User not found",flags:1<<6};const w=`${e}?image=${encodeURIComponent(r.getAvatarURL(512).replace("webp","png"))}`,g=await fetch(w);if(!g.ok)return{content:"API error",flags:1<<6};const{url:x}=await g.json(),N=await v(x);return{content:`<@${r.id}>`,attachments:N}}})}const i=[];var h={onLoad(){l.log("Plugin loaded"),i.push(a.registerCommand({name:"ping",displayName:"ping",description:"Check latency",applicationId:"-1",inputType:1,type:1,execute:async function(t,e){const n=Date.now();return await e.defer(),{content:`Pong: \`${Date.now()-n}ms\``}}})),i.push(a.registerCommand({name:"purge",displayName:"purge",description:"Delete your last N messages",options:[{name:"count",description:"Number to delete",type:4,required:!0}],applicationId:"-1",inputType:1,type:1,execute:async function(t,e){const n=Number(t[0].value),p=s.findByProps("getMessages").getMessages(e.channel.id).array().filter(function(r){return r.author.id===c.getCurrentUser().id}).slice(0,n);for(const r of p)await m.deleteMessage(e.channel.id,r.id);return{content:`Deleted ${p.length} messages.`}}})),i.push(a.registerCommand({name:"userinfo",displayName:"userinfo",description:"Get info about a user",options:[{name:"user",description:"Target user",type:6,required:!0}],applicationId:"-1",inputType:1,type:1,execute:async function(t){const e=c.getUser(t[0].value);return e?{content:`
**${e.username}#${e.discriminator}**
ID: ${e.id}
Avatar: ${e.getAvatarURL(512)}
Created: ${new Date(e.createdAt).toLocaleString()}
`}:{content:"User not found",flags:1<<6}}})),i.push(a.registerCommand({name:"serverinfo",displayName:"serverinfo",description:"Get current server info",applicationId:"-1",inputType:1,type:1,execute:async function(t,e){const n=s.findByProps("getGuild").getGuild(e.guild.id);return{content:`
**${n.name}**
ID: ${n.id}
Members: ${n.memberCount}
Created: ${new Date(n.createdAt).toLocaleString()}
`}}})),i.push(a.registerCommand({name:"fliptext",displayName:"fliptext",description:"Flip your text upside-down",options:[{name:"text",description:"Text to flip",type:3,required:!0}],applicationId:"-1",inputType:1,type:1,execute:async function(t){const e={a:"\u0250",b:"q",c:"\u0254",d:"p",e:"\u01DD",f:"\u025F",g:"\u0183",h:"\u0265",i:"\u1D09",j:"\u027E",k:"\u029E",l:"\u0283",m:"\u026F",n:"u",o:"o",p:"d",q:"b",r:"\u0279",s:"s",t:"\u0287",u:"n",v:"\u028C",w:"\u028D",x:"x",y:"\u028E",z:"z",1:"\u0196",2:"\u1105",3:"\u0190",4:"\u3123",5:"\u03DB",6:"9",7:"\u3125",8:"8",9:"6",0:"0"};return{content:t[0].value.split("").map(function(n){return e[n.toLowerCase()]||n}).reverse().join("")}}})),i.push(a.registerCommand({name:"owoify",displayName:"owoify",description:"OwO speak",options:[{name:"text",description:"Text to owo-ify",type:3,required:!0}],applicationId:"-1",inputType:1,type:1,execute:async function(t){return{content:t[0].value.replace(/r|l/g,"w").replace(/R|L/g,"W").replace(/n([aeiou])/g,"ny$1").replace(/N([aeiou])/g,"Ny$1").replace(/N([AEIOU])/g,"NY$1")}}})),i.push(a.registerCommand({name:"announce",displayName:"announce",description:"Send an announcement embed",options:[{name:"title",description:"Embed title",type:3,required:!0},{name:"desc",description:"Embed description",type:3,required:!0}],applicationId:"-1",inputType:1,type:1,execute:async function(t,e){const n=t[0].value,p=t[1].value;return m.sendMessage(e.channel.id,{content:"",embed:{title:n,description:p,type:"rich",color:65280}}),{content:"Announcement sent."}}}));const o=[{name:"petpet",desc:"PetPet someone",api:"https://api.obamabot.me/v2/image/petpet"},{name:"triggered",desc:"Triggered GIF",api:"https://api.obamabot.me/v2/image/triggered"},{name:"jail",desc:"Jail someone",api:"https://api.obamabot.me/v2/image/jail"},{name:"rip",desc:"RIP tombstone",api:"https://api.obamabot.me/v2/image/rip"},{name:"pixelate",desc:"Pixelate avatar",api:"https://api.obamabot.me/v2/image/pixelate"}];for(const t of o)i.push(b(t))},onUnload(){i.forEach(function(o){return o()}),l.log("Plugin unloaded")},settings:d.Settings};return u.default=h,Object.defineProperty(u,"__esModule",{value:!0}),u})({},vendetta,vendetta.commands,vendetta.metro);
